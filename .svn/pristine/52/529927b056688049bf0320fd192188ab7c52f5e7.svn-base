<?xml version="1.0"?>

<config>
    <modules>
        <Phoenix_Multipletablerates>
            <version>0.2.0</version>
        </Phoenix_Multipletablerates>
    </modules>

    <global>
        <models>
            <phoenix_multipletablerates>
                <class>Phoenix_Multipletablerates_Model</class>
            </phoenix_multipletablerates>
            <multipletablerates_mysql4>
                <rewrite>
                    <carrier_multipletablerates>Phoenix_Multipletablerates_Model_Mysql4_Carrier_Multipletablerates</carrier_multipletablerates>
                </rewrite>
            </multipletablerates_mysql4>
            <multipletablerates_shipping>
                <rewrite>
                    <carrier_multipletablerates>Phoenix_Multipletablerates_Model_Carrier_Multipletablerates</carrier_multipletablerates>
                </rewrite>
            </multipletablerates_shipping>
            <shipping>
                <rewrite>
                    <shipping>Phoenix_Multipletablerates_Model_Shipping_Shipping</shipping>
                    <rate_result>Phoenix_Multipletablerates_Model_Shipping_Rate_Result</rate_result>
                </rewrite>
            </shipping>
        </models>
        <helpers>
            <phoenix_multipletablerates>
                <class>Phoenix_Multipletablerates_Helper</class>
            </phoenix_multipletablerates>
        </helpers>
        <blocks>            
            <phoenix_multipletablerates>
                <class>Phoenix_Multipletablerates_Block</class>
            </phoenix_multipletablerates>
            <multipletablerates_adminhtml>
				<class>Pw_Adminhtml_Block</class>
			</multipletablerates_adminhtml>
        </blocks>
        <resources>
            <phoenix_multipletablerates_setup>
                <setup>
                    <module>Phoenix_Multipletablerates</module>
                    <class>Mage_Catalog_Model_Resource_Eav_Mysql4_Setup</class>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </phoenix_multipletablerates_setup>
            <phoenix_multipletablerates_setup>
                <connection>
                    <use>core_write</use>
                </connection>
            </phoenix_multipletablerates_setup>
            <phoenix_multipletablerates_setup>
                <connection>
                    <use>core_read</use>
                </connection>
            </phoenix_multipletablerates_setup>
        </resources>
        <sales>
            <quote>
                <item>
                    <product_attributes>
                        <transport_type/>
                    </product_attributes>
                </item>
            </quote>
        </sales>
        <phoenix_multipletablerates>
            <shipping>
                <transport>
                    <types>
                        <free>
                            <value>1</value>
                            <label>Free Shipping</label>
                        </free>
                        <parcel>
                            <value>2</value>
                            <label>Parcel</label>
                        </parcel>
                        <parcel_express>
                            <value>3</value>
                            <label>Parcel Express</label>
                        </parcel_express>
                        <conveyance>
                            <value>4</value>
                            <label>Conveyance</label>
                        </conveyance>
                    </types>
                </transport>
                <rate>
                    <sort>
                        <price>
                            <value>sortRatesByPrice</value>
                            <label>By Price</label>
                        </price>
                        <sort_order>
                            <value>sortRatesBySortOrder</value>
                            <label>By Sort Order</label>
                        </sort_order>
                    </sort>
                    <conditions>
                        <customer_group_id>
                            <value>customer_group_id</value>
                            <callback>getRequestCustomerGroupId</callback>
                            <label>Customer Group</label>
                        </customer_group_id>
                        <product_group_id>
                            <value>product_group_id</value>
                            <callback>getRequestProductGroupId</callback>
                            <label>Product Group</label>
                        </product_group_id>
                        <transport_type>
                            <value>transport_type</value>
                            <callback>getRequestTransportType</callback>
                            <label>Transport Type</label>
                        </transport_type>
                    </conditions>
                </rate>
            </shipping>
        </phoenix_multipletablerates>
    </global>

    <frontend>
        <routers>
            <phoenix_multipletablerates>
                <use>standard</use>
                <args>
                    <module>Phoenix_Multipletablerates</module>
                    <frontName>phoenix_multipletablerates</frontName>
                </args>
            </phoenix_multipletablerates>
        </routers>
        <translate>
            <modules>
                <Phoenix_Multipletablerates>
                    <files>
                        <default>Phoenix_Multipletablerates.csv</default>
                    </files>
                </Phoenix_Multipletablerates>
            </modules>
        </translate>
    </frontend>

    <adminhtml>
        <translate>
            <modules>
                <Phoenix_Multipletablerates>
                    <files>
                        <default>Phoenix_Multipletablerates.csv</default>
                    </files>
                </Phoenix_Multipletablerates>
            </modules>
        </translate>
    </adminhtml>
    <admin>
        <routers>
            <multipletablerates>
                <args>
                    <modules>
                        <phoenix_multipletablerates before="Pw_Adminhtml">Phoenix_Multipletablerates</phoenix_multipletablerates>
                    </modules>
                </args>
            </multipletablerates>
        </routers>
    </admin>
    <default>
        <shipping>
            <option>
                <rates_sort_method>sortRatesByPrice</rates_sort_method>
            </option>
        </shipping>
        <carriers>
            <multipletablerates>
                <condition_operator>&gt;=</condition_operator>
            </multipletablerates>
        </carriers>
    </default>
</config>
