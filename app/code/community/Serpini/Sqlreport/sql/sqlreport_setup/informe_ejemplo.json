[{"object_type":"group","group_id":"GR_CUSTOMERS","description":"Customers","orden":"4"},{"object_type":"combo","combo_id":"STORE_SELECT","title":"Show Report For","parameter":"STORE_ID","type":"select","atributes":{"sql":"SELECT 'ALL','All Websites' FROM dual\nUNION ALL\nSELECT store_id,code FROM @core_store\n"}},{"object_type":"combo","combo_id":"CB_CUSTOMER_GUEST","title":"Customer or guest","parameter":"TYPECUSTOMER","type":"set","atributes":{"set":"|ALL;Customers & guest|CUSTOMER;Customers|GUEST;Guest"}},{"object_type":"report","report_id":"INFORME_EJEMPLO","title":"Customers & guest list","report_sql":"SELECT 'Customer' AS `Type`,\n A.entity_id AS `Customer id`,\n A.email AS `Email`,\n B.value AS `Country`,\n C.VALUE AS `Firstname`,\n D.VALUE AS `Lastname` ,\n F.VALUE as `Street`,\n G.VALUE AS `City`,\n H.VALUE AS `Region`,\n I.VALUE AS `Post code`,\n K.VALUE AS `Telephone`\nFROM @customer_entity A\n LEFT JOIN @customer_entity_varchar B\n ON A.entity_id = B.entity_id\n AND (':STORE_ID'='ALL' OR A.store_id=':STORE_ID')\n AND (':TYPECUSTOMER'='ALL' OR 'CUSTOMER'=':TYPECUSTOMER')\n AND B.attribute_id = (SELECT A.attribute_id FROM @eav_attribute A\n\t\t\t\t\t\tINNER JOIN @eav_entity_type B\n\t\t\t\t\t\tON A.entity_type_id = B.entity_type_id\n\t\t\t\t\t\tWHERE A.attribute_code='created_in'\n\t\t\t\t\t\tAND B.entity_type_code='customer')\n LEFT JOIN @customer_entity_varchar C\n ON A.entity_id = C.entity_id\n AND C.attribute_id = (SELECT A.attribute_id FROM @eav_attribute A\n\t\t\t\t\t\tINNER JOIN @eav_entity_type B\n\t\t\t\t\t\tON A.entity_type_id = B.entity_type_id\n\t\t\t\t\t\tWHERE A.attribute_code='firstname'\n\t\t\t\t\t\tAND B.entity_type_code='customer')\n LEFT JOIN @customer_entity_varchar D\n ON A.entity_id = D.entity_id\n AND D.attribute_id = (SELECT A.attribute_id FROM @eav_attribute A\n\t\t\t\t\t\tINNER JOIN @eav_entity_type B\n\t\t\t\t\t\tON A.entity_type_id = B.entity_type_id\n\t\t\t\t\t\tWHERE A.attribute_code='lastname'\n\t\t\t\t\t\tAND B.entity_type_code='customer')\nLEFT JOIN @customer_address_entity E\n ON A.entity_id = E.parent_id\nLEFT JOIN @customer_address_entity_text F\n ON E.entity_id = F.entity_id\nLEFT JOIN @customer_address_entity_varchar G\n ON E.entity_id = G.entity_id\n AND G.attribute_id = (SELECT A.attribute_id FROM @eav_attribute A\n\t\t\t\t\t\tINNER JOIN @eav_entity_type B\n\t\t\t\t\t\tON A.entity_type_id = B.entity_type_id\n\t\t\t\t\t\tWHERE A.attribute_code='city'\n\t\t\t\t\t\tAND B.entity_type_code='customer_address')\nLEFT JOIN @customer_address_entity_varchar H\n ON E.entity_id = H.entity_id\n AND H.attribute_id = (SELECT A.attribute_id FROM @eav_attribute A\n\t\t\t\t\t\tINNER JOIN @eav_entity_type B\n\t\t\t\t\t\tON A.entity_type_id = B.entity_type_id\n\t\t\t\t\t\tWHERE A.attribute_code='region'\n\t\t\t\t\t\tAND B.entity_type_code='customer_address')\nLEFT JOIN @customer_address_entity_varchar I\n ON E.entity_id = I.entity_id\n AND I.attribute_id = (SELECT A.attribute_id FROM @eav_attribute A\n\t\t\t\t\t\tINNER JOIN @eav_entity_type B\n\t\t\t\t\t\tON A.entity_type_id = B.entity_type_id\n\t\t\t\t\t\tWHERE A.attribute_code='postcode'\n\t\t\t\t\t\tAND B.entity_type_code='customer_address')\nLEFT JOIN @customer_address_entity_varchar K\n ON E.entity_id = K.entity_id\n AND K.attribute_id = (SELECT A.attribute_id FROM @eav_attribute A\n\t\t\t\t\t\tINNER JOIN @eav_entity_type B\n\t\t\t\t\t\tON A.entity_type_id = B.entity_type_id\n\t\t\t\t\t\tWHERE A.attribute_code='telephone'\n\t\t\t\t\t\tAND B.entity_type_code='customer_address')\n \nUNION ALL\n\nSELECT  'Guest' as `Type`,\n               null as `Customer id`,\n               A.customer_email AS `Email`,\n               C.Country_id AS `Country`,\n               A.customer_firstname AS `First Name`,\n               A.customer_lastname AS `Last Name`,\n               C.street AS `Street`,\n               C.city AS `City`,\n               C.region AS `Region`,\n               C.postcode AS `Post code`,\n               C.telephone AS `Telephone`\nFROM @sales_flat_order A\nINNER JOIN @sales_flat_shipment B\non  A.entity_id = B.order_id\n   AND B.customer_id is null\n   AND (':STORE_ID'='ALL' OR A.store_id=':STORE_ID')\n   AND (':TYPECUSTOMER'='ALL' OR 'GUEST'=':TYPECUSTOMER')\nINNER JOIN @sales_flat_order_address C\nON A.entity_id = C.parent_id\n  AND C.address_type='shipping'\nGROUP BY A.customer_email,C.Country_id,A.customer_firstname,A.customer_lastname,C.street,C.city,C.region,C.postcode,C.telephone\n  \nORDER BY 1,2,5,6","group_id":"GR_CUSTOMERS","atributes":{"order":"3"},"chart_series":[],"combos":["STORE_SELECT","CB_CUSTOMER_GUEST"]}]